(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{472:function(s,t,a){"use strict";a.r(t);var n=a(15),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"问题来源"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#问题来源"}},[s._v("#")]),s._v(" 问题来源")]),s._v(" "),a("p",[s._v("在之前,部署博客需要走过以下几步")]),s._v(" "),a("ol",[a("li",[s._v("从Git"),a("code",[s._v("git pull")]),s._v("拉取最新的Version")]),s._v(" "),a("li",[s._v("本地编辑Markdown文件")]),s._v(" "),a("li",[s._v("在本地启动"),a("code",[s._v("yarn docs:dev")]),s._v("确保能够成功run起来")]),s._v(" "),a("li",[s._v("将源代码提交至仓库的"),a("code",[s._v("main 或 master")]),s._v("分支以确保团队的代码协同")]),s._v(" "),a("li",[s._v("将打包文件提交至仓库的"),a("code",[s._v("gh-pages")]),s._v("分支进行部署")])]),s._v(" "),a("h2",{attrs:{id:"问题在哪"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#问题在哪"}},[s._v("#")]),s._v(" 问题在哪")]),s._v(" "),a("div",{staticClass:"custom-block note"},[a("p",{staticClass:"custom-block-title"},[s._v("问题")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("我写个博客为什么要那么麻烦,编辑已经够累了\n\n但是我还得花一堆时间操作,一套流程走下来就得5分钟\n\n我还有课要上,我作业还没写呢,写博客那么麻烦,我还是不写算了\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])])]),s._v(" "),a("h2",{attrs:{id:"问题解决"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#问题解决"}},[s._v("#")]),s._v(" 问题解决")]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("解决")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("事实上,通过编写YAML即可完成相应工作\n\n当把源代码Push到main分支上时,YAML会自动执行对应命令将打包文件部署至gh-pages分支下~~~ 实现自动化部署\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])])]),s._v(" "),a("h2",{attrs:{id:"对比问题解决之前"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#对比问题解决之前"}},[s._v("#")]),s._v(" 对比问题解决之前")]),s._v(" "),a("p",[s._v("当把这个自动化部署解决之后,对比之前")]),s._v(" "),a("ol",[a("li",[s._v("从Git"),a("code",[s._v("git pull")]),s._v("拉取最新的Version")]),s._v(" "),a("li",[s._v("本地编辑Markdown文件")]),s._v(" "),a("li",[s._v("在本地启动"),a("code",[s._v("yarn docs:dev")]),s._v("确保能够成功run起来")]),s._v(" "),a("li",[s._v("将源代码提交至仓库的"),a("code",[s._v("main 或 master")]),s._v("分支以确保团队的代码协同,同时将第5步融入进来,实现自动化部署")])]),s._v(" "),a("h2",{attrs:{id:"githubactions实现方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#githubactions实现方法"}},[s._v("#")]),s._v(" GithubActions实现方法")]),s._v(" "),a("ol",[a("li",[s._v("在项目的根目录新建"),a("code",[s._v(".github/workflows")]),s._v("文件夹.")]),s._v(" "),a("li",[s._v("创建YAML配置文件,例如"),a("code",[s._v("AsheOne18.yml")]),s._v(",取名随意")]),s._v(" "),a("li",[s._v("编写配置文件")])]),s._v(" "),a("div",{staticClass:"language-yml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" GitHub Actions Build and Deploy "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 名字随便")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("push")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("branches")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" main "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 当代码Push至Main分支")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("jobs")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 任务")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("build-and-deploy")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 构建 和 部署 ")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("runs-on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" ubuntu"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("latest "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 运行环境")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("steps")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 步骤")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Checkout 🛎️ "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#名字,随便取")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("uses")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" actions/checkout@v2.3.1 \n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("with")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("persist-credentials")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean important"}},[s._v("false")]),s._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 构建静态文件")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Install and Build 🔧 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#名字,随便取")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("|")]),a("span",{pre:!0,attrs:{class:"token scalar string"}},[s._v("\n            npm install yarn \n            yarn\n            yarn docs:build")]),s._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将项目构建至指定分支")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Deploy 🚀 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 名字,随便取")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("uses")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" JamesIves/github"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("pages"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("deploy"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("action@3.7.1\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("with")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("ACCESS_TOKEN")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" $"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" secrets.ACCESS_TOKEN "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Github会自动提供")]),s._v("\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("BRANCH")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" gh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("pages "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 部署指定分支")]),s._v("\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("FOLDER")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" docs/.vuepress/dist "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 静态文件目录")]),s._v("\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("CLEAN")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean important"}},[s._v("true")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br")])]),a("p",[s._v("其中,"),a("code",[s._v("secrets.ACCESS_TOKEN")]),s._v("获取的步骤")]),s._v(" "),a("ol",[a("li",[s._v("Github 个人"),a("code",[s._v("Settings")])]),s._v(" "),a("li",[s._v("左边的 "),a("code",[s._v("Developer settings")])]),s._v(" "),a("li",[s._v("左边的 "),a("code",[s._v("Personal acccess tokens")])]),s._v(" "),a("li",[s._v("右上角 "),a("code",[s._v("Generate new token")])]),s._v(" "),a("li",[s._v("勾选 "),a("code",[s._v("Repo")]),s._v(" 权限,名字随便")])]),s._v(" "),a("p",[s._v("生成的token只能被你看到一次,所以你需要复制它")]),s._v(" "),a("ol",[a("li",[s._v("进入"),a("code",[s._v("项目仓库")])]),s._v(" "),a("li",[s._v("打开"),a("code",[s._v("Setting")])]),s._v(" "),a("li",[s._v("打开"),a("code",[s._v("Secrets")])]),s._v(" "),a("li",[s._v("点击"),a("code",[s._v("New secret")])]),s._v(" "),a("li",[a("code",[s._v("Name")]),s._v("随便取,"),a("code",[s._v("Value")]),s._v("写刚刚复制的"),a("code",[s._v("token")])])]),s._v(" "),a("p",[s._v("这时候一切都完成了,当然,配置远远不止这样,更详细的在"),a("a",{attrs:{href:"https://docs.github.com/cn/actions",target:"_blank",rel:"noopener noreferrer"}},[s._v("官方文档"),a("OutboundLink")],1)])])}),[],!1,null,null,null);t.default=e.exports}}]);